DP05_0032E,   # white
DP05_0033E,   # black
DP05_0034E,   # native american
DP05_0039E,   # asian
DP05_0065E    # hispanic
)
us_pop$
us_pop %>%
select(Total=DP05_0028PE,  # total population
White=DP05_0032E,   # white
Black=DP05_0033E,   # black
Native=DP05_0034E,   # native american
Asian=DP05_0039E,   # asian
Hispanic=DP05_0065E    # hispanic
)
us_pop$
us_pop %>%
select(Total=DP05_0028PE,  # total population
White=DP05_0032E,   # white
Black=DP05_0033E,   # black
Native=DP05_0034E,   # native american
Asian=DP05_0039E,   # asian
Hispanic=DP05_0065E    # hispanic
)
us_pop %>%
select(Total=DP05_0028PE,  # total population
White=DP05_0032E,   # white
DP05_0033E,   # black
Native=DP05_0034E,   # native american
Asian=DP05_0039E,   # asian
Hispanic=DP05_0065E    # hispanic
)
us_pop %>%
select(Total=DP05_0028PE,  # total population
White=DP05_0032E,   # white
Black=DP05_0033E,   # black
Native=DP05_0034E,   # native american
Asian=DP05_0039E,   # asian
Hispanic=DP05_0065E    # hispanic
)
us_pop %>%
select(Total=DP05_0028PE,  # total population
White=DP05_0032E,   # white
Black=DP05_0033E,   # black
Native=DP05_0034E,   # native american
Asian=DP05_0039E,   # asian
Hispanic=DP05_0065E    # hispanic
)
us_pop %>%
select(Total=DP05_0028PE,
White=DP05_0032E,
Black=DP05_0033E,
Native=DP05_0034E,
Asian=DP05_0039E,
Hispanic=DP05_0065E
)
us_pop %>%
select(Total=DP05_0028PE,
White=DP05_0032E,
Black=DP05_0033E,
Native=DP05_0034E,
Asian=DP05_0039E,
Hispanic=DP05_0065E
) %>%
slice(1)
us_pop %>%
select(Total=DP05_0028PE,
White=DP05_0032E,
Black=DP05_0033E,
Native=DP05_0034E,
Asian=DP05_0039E,
Hispanic=DP05_0065E
) %>%
slice(2)
us_pop <- us_pop %>%
select(Total=DP05_0028PE,
White=DP05_0032E,
Black=DP05_0033E,
Native=DP05_0034E,
Asian=DP05_0039E,
Hispanic=DP05_0065E
) %>%
slice(2)
# clean and tidy
us_pop %>%
select(Total=DP05_0028PE,  # total population
White=DP05_0032E,   # white
Black=DP05_0033E,   # black
Native=DP05_0034E,   # native american
Asian=DP05_0039E,   # asian
Hispanic=DP05_0065E    # hispanic
)
us_pop <- readr::read_csv("./awram-us-police-involved-fatalities/data/ACSDP1Y2014.DP05_data_with_overlays_2020-06-02T011259.csv")
# clean and tidy
us_pop %>%
select(Total=DP05_0028PE,
White=DP05_0032E,
Black=DP05_0033E,
Native=DP05_0034E,
Asian=DP05_0039E,
Hispanic=DP05_0065E
)
us_pop <- readr::read_csv("./awram-us-police-involved-fatalities/data/ACSDP1Y2014.DP05_data_with_overlays_2020-06-02T011259.csv")
# clean and tidy
us_pop %>%
select(Total=DP05_0028PE,
White=DP05_0032E,
Black=DP05_0033E,
Native=DP05_0034E,
Asian=DP05_0039E,
Hispanic=DP05_0065E
) %>%
slice(2)
# clean and tidy
us_pop <- us_pop %>%
select(Total=DP05_0028PE,
White=DP05_0032E,
Black=DP05_0033E,
Native=DP05_0034E,
Asian=DP05_0039E,
Hispanic=DP05_0065E
) %>%
slice(2)
deaths %>%
filter(!is.na(race),race=="Other") %>%
ggplot(aes(race)) +
geom_bar(fill=prim_color,color="black",alpha=0.8) +
labs(title="race",x="",y="")
deaths %>%
filter(!is.na(race),race!="Other") %>%
ggplot(aes(race)) +
geom_bar(fill=prim_color,color="black",alpha=0.8) +
labs(title="race",x="",y="")
View(us_pop)
deaths %>%
filter(!is.na(race),race!="Other")
deaths %>%
filter(!is.na(race),race!="Other") %>%
group_by(race)
deaths %>%
filter(!is.na(race),race!="Other") %>%
group_by(race) %>%
summarise(count=n())
# clean and tidy
us_pop <- us_pop %>%
select(Total=DP05_0028PE,
White=DP05_0032E,
Black=DP05_0033E,
Native=DP05_0034E,
Asian=DP05_0039E,
Hispanic=DP05_0065E
) %>%
slice(2) %>%
as.numeric()
r
us_pop <- readr::read_csv("./awram-us-police-involved-fatalities/data/ACSDP1Y2014.DP05_data_with_overlays_2020-06-02T011259.csv")
# clean and tidy
us_pop <- us_pop %>%
select(Total=DP05_0028PE,
White=DP05_0032E,
Black=DP05_0033E,
Native=DP05_0034E,
Asian=DP05_0039E,
Hispanic=DP05_0065E
) %>%
slice(2) %>%
as.numeric()
us_pop <- readr::read_csv("./awram-us-police-involved-fatalities/data/ACSDP1Y2014.DP05_data_with_overlays_2020-06-02T011259.csv")
# clean and tidy
us_pop <- us_pop %>%
select(Total=DP05_0028PE,
White=DP05_0032E,
Black=DP05_0033E,
Native=DP05_0034E,
Asian=DP05_0039E,
Hispanic=DP05_0065E
) %>%
slice(2)
us_pop$Total
us_pop$Black
us_pop <- readr::read_csv("./awram-us-police-involved-fatalities/data/ACSDP1Y2014.DP05_data_with_overlays_2020-06-02T011259.csv")
# clean and tidy
us_pop <- us_pop %>%
select(Total=DP05_0028PE,
White=DP05_0032E,
Black=DP05_0033E,
Native=DP05_0034E,
Asian=DP05_0039E,
Hispanic=DP05_0065E
) %>%
slice(2) %>%
mutate(Total=as.numeric(Total),
White=as.numeric(White),
Black=as.numeric(Black),
Native=as.numeric(Native),
Asian=as.numeric(Asian),
Hispanic=as.numeric(Hispanic)
)
us_pop$Total
us_pop %>%
pivot_longer(cols=Total:Hispanic,names_to="race",values_to="population")
us_pop_transpose <- us_pop %>%
pivot_longer(cols=Total:Hispanic,names_to="race",values_to="population")
deaths %>%
filter(!is.na(race),race!="Other") %>%
group_by(race) %>%
summarise(count=n())
deaths %>%
filter(!is.na(race),race!="Other") %>%
group_by(race) %>%
summarise(count=n()) %>%
left_join(us_pop_transpose,by=race)
deaths %>%
filter(!is.na(race),race!="Other") %>%
group_by(race) %>%
summarise(count=n()) %>%
left_join(us_pop_transpose,by="race")
deaths %>%
filter(!is.na(race),race!="Other") %>%
group_by(race) %>%
summarise(count=n()) %>%
left_join(us_pop_transpose,by="race") %>%
mutate(rate=count/population) %>%
ggplot(aes(rate)) +
geom_bar(fill=prim_color,color="black",alpha=0.8) +
labs(title="race",x="",y="")
deaths %>%
filter(!is.na(race),race!="Other") %>%
group_by(race) %>%
summarise(count=n()) %>%
left_join(us_pop_transpose,by="race") %>%
mutate(rate=count/population)
deaths %>%
filter(!is.na(race),race!="Other") %>%
group_by(race) %>%
summarise(count=n()) %>%
left_join(us_pop_transpose,by="race") %>%
mutate(rate=count/population) %>%
ggplot(aes(race,rate)) +
geom_col(fill=prim_color,color="black",alpha=0.8) +
labs(title="race",x="",y="")
deaths %>%
filter(!is.na(race),race!="Other") %>%
group_by(race) %>%
summarise(count=n()) %>%
left_join(us_pop_transpose,by="race") %>%
mutate(rate=count/population) %>%
ggplot(aes(race,rate*1e6)) +
geom_col(fill=prim_color,color="black",alpha=0.8) +
labs(title="race",x="",y="")
deaths %>%
filter(!is.na(race),race!="Other") %>%
group_by(race) %>%
summarise(count=n()) %>%
left_join(us_pop_transpose,by="race") %>%
mutate(rate=count/population) %>%
ggplot(aes(race,rate*1e6)) +
geom_col(fill=prim_color,color="black",alpha=0.8) +
labs(title="per capita police-involved deaths",x="",y="")
deaths %>%
filter(!is.na(race),race!="Other") %>%
group_by(race) %>%
summarise(count=n()) %>%
left_join(us_pop_transpose,by="race") %>%
mutate(rate=count/population) %>%
ggplot(aes(race,rate*1e6)) +
geom_col(fill=prim_color,color="black",alpha=0.8) +
labs(title="per capita police-involved deaths",x="",y="(per million)")
deaths %>%
filter(!is.na(race),race!="Other") %>%
group_by(race) %>%
summarise(count=n()) %>%
left_join(us_pop_transpose,by="race") %>%
mutate(rate=count/population) %>%
ggplot(aes(race,rate*1e6)) +
geom_col(fill=prim_color,color="black",alpha=0.8) +
labs(title="per capita police-involved deaths",x="",y="(deaths per million)")
deaths %>%
filter(!is.na(race),race!="Other") %>%
group_by(race) %>%
summarise(count=n()) %>%
left_join(us_pop_transpose,by="race") %>%
mutate(rate=count/population) %>%
ggplot(aes(fct_reorder(race,rate),rate*1e6)) +
geom_col(fill=prim_color,color="black",alpha=0.8) +
labs(title="per capita police-involved deaths",x="",y="(deaths per million)")
deaths %>%
filter(!is.na(race),race!="Other") %>%
group_by(race) %>%
summarise(count=n()) %>%
left_join(us_pop_transpose,by="race") %>%
mutate(rate=count/population) %>%
ggplot(aes(fct_reorder(race,desc(rate)),rate*1e6)) +
geom_col(fill=prim_color,color="black",alpha=0.8) +
labs(title="per capita police-involved deaths",x="",y="(deaths per million)")
library(lubridate)
library(tidyverse)
library(dslabs)
data(murders)
theme_set(theme_minimal())
prim_color <- "#5fa052"
deaths %>%
mutate(armed=replace_na(armed,"Unarmed")) %>%
mutate(armed=fct_lump(armed)) %>%
count(armed)
# suspect armed
deaths %>%
mutate(armed=replace_na(armed,"Unarmed")) %>%
mutate(armed=fct_lump(armed)) %>%
count(armed) %>%
ggplot(aes(fct_reorder(armed,n),n)) +
geom_col(fill=prim_color,color="black",alpha=0.8) +
labs(title="armed?",x="",y="") +
scale_y_continuous(labels=scales::comma)
# suspect armed
deaths %>%
mutate(armed=replace_na(armed,"Unarmed")) %>%
mutate(armed=fct_lump(armed)) %>%
count(armed) %>%
ggplot(aes(fct_reorder(armed,desc(n)),n)) +
geom_col(fill=prim_color,color="black",alpha=0.8) +
labs(title="armed?",x="",y="") +
scale_y_continuous(labels=scales::comma)
# suspect armed
deaths %>%
mutate(armed=replace_na(armed,"Unarmed")) %>%
mutate(armed=fct_lump(armed)) %>%
count(armed) %>%
ggplot(aes(fct_reorder(armed,desc(n)),n)) +
geom_col(fill=prim_color,color="black",alpha=0.8) +
labs(title="weapon?",x="",y="") +
scale_y_continuous(labels=scales::comma)
library(tidyverse)
library(dslabs)
data(murders)
theme_set(theme_minimal())
prim_color <- "#5fa052"
# import data
# police fatality data
deaths <- readr::read_csv("./awram-us-police-involved-fatalities/data/police_fatalities.csv")
deaths
View(deaths)
us_pop <- readr::read_csv("./awram-us-police-involved-fatalities/data/ACSDP1Y2014.DP05_data_with_overlays_2020-06-02T011259.csv")
us_pop
# clean and tidy
us_pop <- us_pop %>%
select(Total=DP05_0028PE,
White=DP05_0032E,
Black=DP05_0033E,
Native=DP05_0034E,
Asian=DP05_0039E,
Hispanic=DP05_0065E
) %>%
slice(2) %>%
mutate(Total=as.numeric(Total),
White=as.numeric(White),
Black=as.numeric(Black),
Native=as.numeric(Native),
Asian=as.numeric(Asian),
Hispanic=as.numeric(Hispanic)
)
us_pop
us_pop$Asian
us_pop_transpose <- us_pop %>%
pivot_longer(cols=Total:Hispanic,names_to="race",values_to="population")
us_pop_transpose
deaths
deaths %>%
filter(!is.na(race),race!="Other") %>%
group_by(race) %>%
summarise(count=n()) %>%
left_join(us_pop_transpose,by="race") %>%
mutate(rate=count/population) %>%
ggplot(aes(fct_reorder(race,desc(rate)),rate*1e6)) +
geom_col(fill=prim_color,color="black",alpha=0.8) +
labs(title="per capita police-involved deaths",x="",y="(deaths per million)")
deaths
library(dslabs)
library(tidyverse)
data("murders")
"murders
murders
```{r}
ggplot()
```
```{r}
ggplot(aes(x=region,y=total))
```
```{r}
ggplot(aes(x=region,y=total))
```
```{r}
ggplot(aes(x=region,y=total))
```
```{r}
murders %>%
ggplot(aes(x=region,y=total))
```
```{r}
murders %>%
ggplot(aes(x=region,y=total)) +
geom_col()
```
```{r}
murders %>%
ggplot(aes(x=region,y=total)) +
geom_point()
```
```{r}
murders %>%
ggplot(aes(x=region,y=total)) +
geom_jitter()
```
```{r}
murders %>%
ggplot(aes(x=population,y=total)) +
geom_jitter()
```
```{r}
murders %>%
ggplot(aes(y=total)) +
geom_histogram()
```
```{r}
murders %>%
ggplot(aes(x=total)) +
geom_histogram()
```
```{r}
murders %>%
ggplot(aes(x=total,y=population)) +
geom_point()
```
```{r}
murders %>%
ggplot(aes(x=total,y=population)) +
geom_point() +
geom_line()
```
```{r}
murders %>%
ggplot(aes(x=total,y=population)) +
geom_point(color="blue")
```
library(tidyverse)
library(dslabs)
library(RColorBrewer)
theme_set(theme_minimal())
prim_color <- "#8fc224"
# import data
# police fatality data
deaths <- readr::read_csv("./awram-us-police-involved-fatalities/data/police_fatalities.csv")
# census population data
state_pop <- readr::read_csv("./awram-us-police-involved-fatalities/data/censusstatepopulations2014.csv")
us_pop <- readr::read_csv("./awram-us-police-involved-fatalities/data/ACSDP1Y2014.DP05_data_with_overlays_2020-06-02T011259.csv")
# clean and tidy
us_pop <- us_pop %>%
select(Total=DP05_0028PE,
White=DP05_0032E,
Black=DP05_0033E,
Native=DP05_0034E,
Asian=DP05_0039E,
Hispanic=DP05_0066E
) %>%
slice(2) %>%
mutate(Total=as.numeric(Total),
White=as.numeric(White),
Black=as.numeric(Black),
Native=as.numeric(Native),
Asian=as.numeric(Asian),
Hispanic=as.numeric(Hispanic)
)
deaths
deaths %>% filter(date = max(date))
max(deaths$date)
deaths %>% mutate(year = lubridate::year(date))
d2 <- deaths %>% mutate(year = lubridate::year(date))
d2
d2 %>% group_by(year,race) %>% summarise(count = n())
d2 %>% group_by(year,race) %>% summarise(count = n()) %>% filter(year = max(year))
d2 %>% group_by(year,race) %>% summarise(count = n()) %>% filter(year == max(year))
d2 %>% group_by(year,race) %>% summarise(count = n(), .groups="drop") %>% filter(year == max(year))
b <- 284/0.13
w <- 540/0.5
b
w
library(tidyverse)
library(dslabs)
# import data
# police fatality data
deaths <- readr::read_csv("./awram-us-police-involved-fatalities/data/police_fatalities.csv")
# census population data
state_pop <- readr::read_csv("./awram-us-police-involved-fatalities/data/censusstatepopulations2014.csv")
us_pop <- readr::read_csv("./awram-us-police-involved-fatalities/data/ACSDP1Y2014.DP05_data_with_overlays_2020-06-02T011259.csv")
# clean and tidy
us_pop <- us_pop %>%
select(Total=DP05_0028PE,
White=DP05_0032E,
Black=DP05_0033E,
Native=DP05_0034E,
Asian=DP05_0039E,
Hispanic=DP05_0066E
) %>%
slice(2) %>%
mutate(Total=as.numeric(Total),
White=as.numeric(White),
Black=as.numeric(Black),
Native=as.numeric(Native),
Asian=as.numeric(Asian),
Hispanic=as.numeric(Hispanic)
)
deaths
